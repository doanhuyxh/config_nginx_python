# templates/nginx.conf
server {{
    listen 80;
    server_name {domain};

    # Bỏ giới hạn kích thước file upload
    client_max_body_size 0;  # 0 nghĩa là không giới hạn kích thước request body

    location / {{
        proxy_pass {app_url};                           # URL của backend
        proxy_set_header Host $host;                    # Forward domain từ client
        proxy_set_header X-Real-IP $remote_addr;        # IP thực của client
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;  # Chuỗi IP đã forward
        proxy_set_header X-Forwarded-Proto $scheme;     # Giao thức (http/https)
        proxy_set_header X-Forwarded-Host $host;        # Host gốc của request
        proxy_set_header X-Forwarded-Server $host;      # Server xử lý request

        # Đảm bảo forward cookie và tất cả header khác
        proxy_pass_header Set-Cookie;                   # Forward cookie từ backend về client
        proxy_set_header Cookie $http_cookie;           # Forward cookie từ client về backend
        proxy_pass_request_headers on;                  # Forward toàn bộ header từ client

    }}
}}